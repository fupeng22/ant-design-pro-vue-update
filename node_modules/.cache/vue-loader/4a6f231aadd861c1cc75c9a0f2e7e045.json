{"remainingRequest":"D:\\practicespace\\ant-design-pro-vue-update\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\practicespace\\ant-design-pro-vue-update\\src\\views\\schedule\\model\\schedule-cell.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\practicespace\\ant-design-pro-vue-update\\src\\views\\schedule\\model\\schedule-cell.vue","mtime":1590808500451},{"path":"D:\\practicespace\\ant-design-pro-vue-update\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\practicespace\\ant-design-pro-vue-update\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\practicespace\\ant-design-pro-vue-update\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\practicespace\\ant-design-pro-vue-update\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnc2NoZWR1bGUtY2VsbCcsDQogIHByb3BzOiB7DQogICAgdGV4dDogU3RyaW5nLA0KICAgIHJvd0RhdGE6IEFycmF5DQogIH0sDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7fQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgbW9tZW50LA0KICAgIGhhbmRsZUNoYW5nZSAoZXZlbnQsIGtleSwgY29sdW1uLCB0eXBlKSB7DQogICAgICBjb25zb2xlLmxvZyhldmVudCwga2V5LCBjb2x1bW4sIHR5cGUsICdoYW5kbGVDaGFuZ2UnKQ0KICAgICAgbGV0IHZhbHVlID0gJycNCiAgICAgIGlmICh0eXBlID09PSAnZGF0ZScpIHsNCiAgICAgICAgdmFsdWUgPSBtb21lbnQoZXZlbnQpLmZvcm1hdCgnWVlZWS1NTS1ERCcpDQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzZWxlY3QnKSB7DQogICAgICAgIHZhbHVlID0gZXZlbnQNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlDQogICAgICB9DQogICAgICBjb25zdCBuZXdEYXRhID0gWy4uLnRoaXMuZGF0YVNvdXJjZV0NCiAgICAgIGNvbnN0IHRhcmdldCA9IG5ld0RhdGEuZmlsdGVyKChpdGVtKSA9PiBrZXkgPT09IGl0ZW0ua2V5KVswXQ0KICAgICAgaWYgKHRhcmdldCkgew0KICAgICAgICB0YXJnZXRbY29sdW1uXSA9IHZhbHVlDQogICAgICAgIHRoaXMuZGF0YVNvdXJjZSA9IG5ld0RhdGENCiAgICAgIH0NCiAgICB9LA0KICAgIG9uQ2VsbENoYW5nZSAoa2V5KSB7DQogICAgICBjb25zb2xlLmxvZyhrZXksICdvbkNlbGxDaGFuZ2UnKQ0KICAgICAgLy8gY29uc3QgZGF0YVNvdXJjZSA9IFsuLi50aGlzLmRhdGFTb3VyY2VdOw0KICAgICAgLy8gY29uc3QgdGFyZ2V0ID0gZGF0YVNvdXJjZS5maW5kKChpdGVtKSA9PiBpdGVtLmtleSA9PT0ga2V5KTsNCiAgICAgIC8vIGlmICh0YXJnZXQpIHsNCiAgICAgIC8vICAgICB0YXJnZXRbZGF0YUluZGV4XSA9IHZhbHVlOw0KICAgICAgLy8gICAgIHRoaXMuZGF0YVNvdXJjZSA9IGRhdGFTb3VyY2U7DQogICAgICAvLyB9DQogICAgfSwNCiAgICBoYW5kbGVBZGQgKCkgew0KICAgICAgY29uc3QgeyBkYXRhU291cmNlIH0gPSB0aGlzDQogICAgICBjb25zdCBjb3VudCA9IGRhdGFTb3VyY2UubGVuZ3RoDQogICAgICBjb25zdCBkYXRlID0gbW9tZW50KERhdGUubm93KCkpLmZvcm1hdCgnWVlZWS1NTS1ERCcpDQogICAgICBjb25zdCBuZXdEYXRhID0geyBrZXk6IGNvdW50LCBzdGF0dXM6ICdjaGVjaycsIGNyZWF0ZVRpbWU6IGRhdGUsIHJlcXVpcmVkVGltZTogZGF0ZSB9DQogICAgICB0aGlzLmRhdGFTb3VyY2UgPSBbLi4uZGF0YVNvdXJjZSwgbmV3RGF0YV0NCiAgICB9LA0KDQogICAgaGFuZGxlQ2VsbCAocmVjb3JkKSB7DQogICAgICBjb25zb2xlLmxvZyhyZWNvcmQsICdoYW5kZWxDZWxsJykNCiAgICB9LA0KICAgIEN1c3RvbUNlbGwgKHJlY29yZCwgcm93SW5kZXgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG9uOiB7DQogICAgICAgICAgZGJsY2xpY2s6IChldmVudCkgPT4gew0KICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5sb2NhbE5hbWUgPT09ICdpbnB1dCcpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlY29yZC5zdGF0dXMgPSByZWNvcmQuc3RhdHVzID09PSAnZWRpdCcgPyAnY2hlY2snIDogJ2VkaXQnDQogICAgICAgICAgICBjb25zb2xlLmxvZyhyZWNvcmQsIHJvd0luZGV4LCBldmVudC50YXJnZXQubG9jYWxOYW1lLCAnY3VzdG9tLWNlbGwnKQ0KICAgICAgICAgIH0sDQogICAgICAgICAgY29udGV4dG1lbnU6IChldmVudCkgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQsICdjdXN0b20tY2VsbCcpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["schedule-cell.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"schedule-cell.vue","sourceRoot":"src/views/schedule/model","sourcesContent":["<template>\r\n  <div v-if=\"item.type === 'edit'\">\r\n    <span>{{text}}</span>\r\n  </div>\r\n  <a-select\r\n    class=\"cell-select\"\r\n    @change=\"(e) => handleChange(e, props.key, item.key, item.type)\"\r\n    v-else-if=\"item.type === 'select'\">\r\n    <a-select-option v-for=\"op of item.option\" :key=\"op\" :value=\"op\">{{ op }}</a-select-option>\r\n  </a-select>\r\n  <a-date-picker\r\n    :allowClear=\"false\"\r\n    @change=\"(e) => handleChange(e, props[item.key].key, item.key, item.type)\"\r\n    v-else-if=\"item.type === 'date'\"\r\n    :format=\"dateFormat\"/>\r\n  <a-input\r\n    v-else-if=\"item.type === 'input'\"\r\n    :value=\"text\"\r\n    @change=\"(e) => handleChange(e, props.key, item.key, item.type)\"/>\r\n</template>\r\n<script>\r\nimport moment from 'moment'\r\n\r\nexport default {\r\n  name: 'schedule-cell',\r\n  props: {\r\n    text: String,\r\n    rowData: Array\r\n  },\r\n  data () {\r\n    return {}\r\n  },\r\n  methods: {\r\n    moment,\r\n    handleChange (event, key, column, type) {\r\n      console.log(event, key, column, type, 'handleChange')\r\n      let value = ''\r\n      if (type === 'date') {\r\n        value = moment(event).format('YYYY-MM-DD')\r\n      } else if (type === 'select') {\r\n        value = event\r\n      } else {\r\n        value = event.target.value\r\n      }\r\n      const newData = [...this.dataSource]\r\n      const target = newData.filter((item) => key === item.key)[0]\r\n      if (target) {\r\n        target[column] = value\r\n        this.dataSource = newData\r\n      }\r\n    },\r\n    onCellChange (key) {\r\n      console.log(key, 'onCellChange')\r\n      // const dataSource = [...this.dataSource];\r\n      // const target = dataSource.find((item) => item.key === key);\r\n      // if (target) {\r\n      //     target[dataIndex] = value;\r\n      //     this.dataSource = dataSource;\r\n      // }\r\n    },\r\n    handleAdd () {\r\n      const { dataSource } = this\r\n      const count = dataSource.length\r\n      const date = moment(Date.now()).format('YYYY-MM-DD')\r\n      const newData = { key: count, status: 'check', createTime: date, requiredTime: date }\r\n      this.dataSource = [...dataSource, newData]\r\n    },\r\n\r\n    handleCell (record) {\r\n      console.log(record, 'handelCell')\r\n    },\r\n    CustomCell (record, rowIndex) {\r\n      return {\r\n        on: {\r\n          dblclick: (event) => {\r\n            if (event.target.localName === 'input') {\r\n              return true\r\n            }\r\n            record.status = record.status === 'edit' ? 'check' : 'edit'\r\n            console.log(record, rowIndex, event.target.localName, 'custom-cell')\r\n          },\r\n          contextmenu: (event) => {\r\n            console.log(event, 'custom-cell')\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n</style>\r\n"]}]}